
def marcadorFallado():
    info.change_life_by(-1)
    music.wawawawaa.play()
    if info.life() == 2:
        bocaDeFiore.set_image(img("""
            ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ...............ff...............
                        ...............2................
                        ................................
                        ................................
        """))
    else:
        bocaDeFiore.set_image(img("""
            ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ................................
                        ..............fff...............
                        .............f1f1f..............
                        ..............fff...............
                        ................................
                        ................................
        """))

def on_b_pressed():
    global marcadorUsado
    marcadorUsado += 1
    if marcadorUsado > 2:
        marcadorUsado = 0
    if marcadorUsado == 0:
        marcador.set_image(img("""
            . . . . . . . . . . . . . . . . 
                        . . . . . . . 8 8 . . . . . . . 
                        . . . . . . 8 6 6 8 . . . . . . 
                        . . . . . . 8 6 6 8 . . . . . . 
                        . . . . . . . 8 8 . . . . . . . 
                        . . . . . . 8 6 6 8 . . . . . . 
                        . . . . . f f 6 6 8 f . . . . . 
                        . . . . f d d f f 8 d f . . . . 
                        . . . f d d d d d f f . . . . . 
                        . . . f d d d f f d f . . . . . 
                        . . . f d d f d d f d f . . . . 
                        . . . f d f d f f d f . . . . . 
                        . . . f d f f d d f . . . . . . 
                        . . . . f d f f f 8 . . . . . . 
                        . . . . f d d f 6 8 . . . . . . 
                        . . . . . f f d f 8 . . . . . .
        """))
    elif marcadorUsado == 1:
        marcador.set_image(img("""
            . . . . . . . . . . . . . . . . 
                        . . . . . . . 2 2 . . . . . . . 
                        . . . . . . 2 3 3 2 . . . . . . 
                        . . . . . . 2 3 3 2 . . . . . . 
                        . . . . . . . 2 2 . . . . . . . 
                        . . . . . . 2 3 3 2 . . . . . . 
                        . . . . . f f 3 3 2 f . . . . . 
                        . . . . f d d f f 2 d f . . . . 
                        . . . f d d d d d f f . . . . . 
                        . . . f d d d f f d f . . . . . 
                        . . . f d d f d d f d f . . . . 
                        . . . f d f d f f d f . . . . . 
                        . . . f d f f d d f . . . . . . 
                        . . . . f d f f f 2 . . . . . . 
                        . . . . f d d f 3 2 . . . . . . 
                        . . . . . f f d f 2 . . . . . .
        """))
    elif marcadorUsado == 2:
        marcador.set_image(img("""
            . . . . . . . . . . . . . . . . 
                        . . . . . . . 4 4 . . . . . . . 
                        . . . . . . 4 5 5 4 . . . . . . 
                        . . . . . . 4 5 5 4 . . . . . . 
                        . . . . . . . 4 4 . . . . . . . 
                        . . . . . . 4 5 5 4 . . . . . . 
                        . . . . . f f 5 5 4 f . . . . . 
                        . . . . f d d f f 4 d f . . . . 
                        . . . f d d d d d f f . . . . . 
                        . . . f d d d f f d f . . . . . 
                        . . . f d d f d d f d f . . . . 
                        . . . f d f d f f d f . . . . . 
                        . . . f d f f d d f . . . . . . 
                        . . . . f d f f f 4 . . . . . . 
                        . . . . f d d f 5 4 . . . . . . 
                        . . . . . f f d f 4 . . . . . .
        """))
controller.B.on_event(ControllerButtonEvent.PRESSED, on_b_pressed)

def on_a_pressed():
    if marcadorPos < marcadorAnterior + 2 and marcadorPos > marcadorAnterior - 2:
        marcadorCorrecto()
    else:
        marcadorFallado()
controller.A.on_event(ControllerButtonEvent.PRESSED, on_a_pressed)

def marcadorCorrecto():
    global speed, marcadorGraficoAnterior, marcadorAnterior, posicionY
    info.change_score_by(1)
    speed = 40 * (1 + info.score() / 10)
    music.magic_wand.play()
    if marcadorUsado == 0:
        marcadorGraficoAnterior = sprites.create(img("""
                . . . . . . . . . . . . . . . . 
                            . . . . . . . 8 8 . . . . . . . 
                            . . . . . . 8 6 6 8 . . . . . . 
                            . . . . . . 8 6 6 8 . . . . . . 
                            . . . . . . . 8 8 . . . . . . . 
                            . . . . . . 8 6 6 8 . . . . . . 
                            . . . . . . 8 6 6 8 . . . . . . 
                            . . . . . . 8 6 6 8 . . . . . . 
                            . . . . . . 8 6 6 8 . . . . . . 
                            . . . . . . 8 6 6 8 . . . . . . 
                            . . . . . . 8 6 6 8 . . . . . . 
                            . . . . . . 8 6 6 8 . . . . . . 
                            . . . . . . 8 6 6 8 . . . . . . 
                            . . . . . . 8 6 6 8 . . . . . . 
                            . . . . . . 8 6 6 8 . . . . . . 
                            . . . . . . 8 8 8 8 . . . . . .
            """),
            SpriteKind.projectile)
    elif marcadorUsado == 1:
        marcadorGraficoAnterior = sprites.create(img("""
                . . . . . . . . . . . . . . . . 
                            . . . . . . . 2 2 . . . . . . . 
                            . . . . . . 2 3 3 2 . . . . . . 
                            . . . . . . 2 3 3 2 . . . . . . 
                            . . . . . . . 2 2 . . . . . . . 
                            . . . . . . 2 3 3 2 . . . . . . 
                            . . . . . . 2 3 3 2 . . . . . . 
                            . . . . . . 2 3 3 2 . . . . . . 
                            . . . . . . 2 3 3 2 . . . . . . 
                            . . . . . . 2 3 3 2 . . . . . . 
                            . . . . . . 2 3 3 2 . . . . . . 
                            . . . . . . 2 3 3 2 . . . . . . 
                            . . . . . . 2 3 3 2 . . . . . . 
                            . . . . . . 2 3 3 2 . . . . . . 
                            . . . . . . 2 3 3 2 . . . . . . 
                            . . . . . . 2 2 2 2 . . . . . .
            """),
            SpriteKind.projectile)
    elif marcadorUsado == 2:
        marcadorGraficoAnterior = sprites.create(img("""
                . . . . . . . . . . . . . . . . 
                            . . . . . . . 4 4 . . . . . . . 
                            . . . . . . 4 5 5 4 . . . . . . 
                            . . . . . . 4 5 5 4 . . . . . . 
                            . . . . . . . 4 4 . . . . . . . 
                            . . . . . . 4 5 5 4 . . . . . . 
                            . . . . . . 4 5 5 4 . . . . . . 
                            . . . . . . 4 5 5 4 . . . . . . 
                            . . . . . . 4 5 5 4 . . . . . . 
                            . . . . . . 4 5 5 4 . . . . . . 
                            . . . . . . 4 5 5 4 . . . . . . 
                            . . . . . . 4 5 5 4 . . . . . . 
                            . . . . . . 4 5 5 4 . . . . . . 
                            . . . . . . 4 5 5 4 . . . . . . 
                            . . . . . . 4 5 5 4 . . . . . . 
                            . . . . . . 4 4 4 4 . . . . . .
            """),
            SpriteKind.projectile)
    list2[info.score()] = marcadorGraficoAnterior
    marcadorGraficoAnterior.set_position(marcadorPos, posicionY)
    marcadorAnterior = marcadorPos
    if 60 < posicionY:
        posicionY = posicionY - 14
        if marcadorAnterior < 80:
            ojosDeFiore.set_image(img("""
                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ...........1......1.............
                                ...........f1.....f1............
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
            """))
        else:
            ojosDeFiore.set_image(img("""
                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ............1......1............
                                ...........1f.....1f............
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
            """))
    else:
        if marcadorAnterior < 80:
            ojosDeFiore.set_image(img("""
                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ...........f1.....f1............
                                ...........1......1.............
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
            """))
        else:
            ojosDeFiore.set_image(img("""
                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ...........1f.....1f............
                                ............1......1............
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
                                ................................
            """))
        for value in list2:
            value.set_position(value.x, value.y + 14)
    marcador.set_position(80, posicionY)
    marcador.set_velocity(speed, 0)
marcadorGraficoAnterior: Sprite = None
marcadorPos = 0
speed = 0
marcadorUsado = 0
marcadorAnterior = 0
list2: List[Sprite] = []
posicionY = 0
marcador: Sprite = None
ojosDeFiore: Sprite = None
bocaDeFiore: Sprite = None
paredIzq = 10
paredDer = 150
caraDeFiore = sprites.create(img("""
        ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ............ffffff..............
            ...........feeeeeeeee...........
            ..........feeeddedeeee..........
            .........feeedededdedee.........
            ........feedddedededddee........
            .......feeddddddddddddde........
            .......feedeedddddeeddde........
            .......feedddddddddddddfe.......
            ......feeddddddddddddddfe.......
            .....fdedddddddddddddddfef......
            .....fdedddddddbdddddddfdf......
            ......ffdddddddbdddddddff.......
            .......fddddddddbddddddf........
            ........fddddbdbddbdddf.........
            ........fdddbddddddbddf.........
            .........fdddddddddddf..........
            .........fdddddddddddf..........
            ..........fdddddddddf...........
            ...........fdddddddf............
            ............fffffff.............
    """),
    SpriteKind.projectile)
bocaDeFiore = sprites.create(img("""
        ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ...............ff...............
            ................................
            ................................
            ................................
    """),
    SpriteKind.projectile)
ojosDeFiore = sprites.create(img("""
        ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ...........1......1.............
            ...........f1.....f1............
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
    """),
    SpriteKind.projectile)
paredDer = 150
paredIzq = 10
base = sprites.create(img("""
        . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . e e e e . . . . . . 
            e e e e e e e e e e e e e e e e 
            e e e e e e e e e e e e e e e e
    """),
    SpriteKind.projectile)
marcador = sprites.create(img("""
        . . . . . . . . . . . . . . . . 
            . . . . . . . 8 8 . . . . . . . 
            . . . . . . 8 6 6 8 . . . . . . 
            . . . . . . 8 6 6 8 . . . . . . 
            . . . . . . . 8 8 . . . . . . . 
            . . . . . . 8 6 6 8 . . . . . . 
            . . . . . f f 6 6 8 f . . . . . 
            . . . . f d d f f 8 d f . . . . 
            . . . f d d d d d f f . . . . . 
            . . . f d d d f f d f . . . . . 
            . . . f d d f d d f d f . . . . 
            . . . f d f d f f d f . . . . . 
            . . . f d f f d d f . . . . . . 
            . . . . f d f f f 8 . . . . . . 
            . . . . f d d f 6 8 . . . . . . 
            . . . . . f f d f 8 . . . . . .
    """),
    SpriteKind.projectile)
posicionY = 108
list2 = []
list2[0] = base
marcador.set_position(80, posicionY)
base.set_position(80, 110)
marcador.set_velocity(50, 0)
marcadorAnterior = 80
marcadorUsado = 0
info.set_life(3)
info.set_score(0)
speed = 40

def on_on_update():
    global marcadorPos, paredIzq, paredDer
    marcadorPos = marcador.x
    if marcadorPos < paredIzq:
        marcador.set_velocity(speed, 0)
        paredIzq = randint(50, 70)
    elif marcadorPos > paredDer:
        paredDer = randint(90, 100)
        marcador.set_velocity(speed * -1, 0)
game.on_update(on_on_update)
