function marcadorFallado () {
    info.changeLifeBy(-1)
    music.wawawawaa.play()
    if (info.life() == 2) {
        bocaDeFiore.setImage(img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ...............ff...............
            ...............2................
            ................................
            ................................
            `)
    } else {
        bocaDeFiore.setImage(img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ..............fff...............
            .............f1f1f..............
            ..............fff...............
            ................................
            ................................
            `)
    }
}
controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
    marcadorUsado += 1
    if (marcadorUsado > 2) {
        marcadorUsado = 0
    }
    setColorMarcador()
})
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (botonPresionado == 0) {
        if (marcadorPos < marcadorAnterior + 2 && marcadorPos > marcadorAnterior - 2) {
            marcadorCorrecto()
            botonPresionado = 1
        } else {
            marcadorFallado()
            botonPresionado = 1
        }
    }
    pause(100)
    botonPresionado = 0
})
function marcadorCorrecto () {
    info.changeScoreBy(1)
    speed = 40 * (1 + info.score() / 10)
    music.magicWand.play()
    if (marcadorUsado == 0) {
        marcadorGraficoAnterior = sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . 8 8 . . . . . . . 
            . . . . . . 8 6 6 8 . . . . . . 
            . . . . . . 8 6 6 8 . . . . . . 
            . . . . . . . 8 8 . . . . . . . 
            . . . . . . 8 6 6 8 . . . . . . 
            . . . . . . 8 6 6 8 . . . . . . 
            . . . . . . 8 6 6 8 . . . . . . 
            . . . . . . 8 6 6 8 . . . . . . 
            . . . . . . 8 6 6 8 . . . . . . 
            . . . . . . 8 6 6 8 . . . . . . 
            . . . . . . 8 6 6 8 . . . . . . 
            . . . . . . 8 6 6 8 . . . . . . 
            . . . . . . 8 6 6 8 . . . . . . 
            . . . . . . 8 6 6 8 . . . . . . 
            . . . . . . 8 8 8 8 . . . . . . 
            `, SpriteKind.Projectile)
    } else if (marcadorUsado == 1) {
        marcadorGraficoAnterior = sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . 2 2 . . . . . . . 
            . . . . . . 2 3 3 2 . . . . . . 
            . . . . . . 2 3 3 2 . . . . . . 
            . . . . . . . 2 2 . . . . . . . 
            . . . . . . 2 3 3 2 . . . . . . 
            . . . . . . 2 3 3 2 . . . . . . 
            . . . . . . 2 3 3 2 . . . . . . 
            . . . . . . 2 3 3 2 . . . . . . 
            . . . . . . 2 3 3 2 . . . . . . 
            . . . . . . 2 3 3 2 . . . . . . 
            . . . . . . 2 3 3 2 . . . . . . 
            . . . . . . 2 3 3 2 . . . . . . 
            . . . . . . 2 3 3 2 . . . . . . 
            . . . . . . 2 3 3 2 . . . . . . 
            . . . . . . 2 2 2 2 . . . . . . 
            `, SpriteKind.Projectile)
    } else if (marcadorUsado == 2) {
        marcadorGraficoAnterior = sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . 4 4 . . . . . . . 
            . . . . . . 4 5 5 4 . . . . . . 
            . . . . . . 4 5 5 4 . . . . . . 
            . . . . . . . 4 4 . . . . . . . 
            . . . . . . 4 5 5 4 . . . . . . 
            . . . . . . 4 5 5 4 . . . . . . 
            . . . . . . 4 5 5 4 . . . . . . 
            . . . . . . 4 5 5 4 . . . . . . 
            . . . . . . 4 5 5 4 . . . . . . 
            . . . . . . 4 5 5 4 . . . . . . 
            . . . . . . 4 5 5 4 . . . . . . 
            . . . . . . 4 5 5 4 . . . . . . 
            . . . . . . 4 5 5 4 . . . . . . 
            . . . . . . 4 5 5 4 . . . . . . 
            . . . . . . 4 4 4 4 . . . . . . 
            `, SpriteKind.Projectile)
    }
    list2[info.score()] = marcadorGraficoAnterior
    marcadorGraficoAnterior.setPosition(marcadorPos, posicionY)
    marcadorAnterior = marcadorPos
    if (60 < posicionY) {
        posicionY = posicionY - 14
        if (marcadorAnterior < 80) {
            ojosDeFiore.setImage(img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ...........1......1.............
                ...........f1.....f1............
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                `)
        } else {
            ojosDeFiore.setImage(img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ............1......1............
                ...........1f.....1f............
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                `)
        }
    } else {
        if (marcadorAnterior < 80) {
            ojosDeFiore.setImage(img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ...........f1.....f1............
                ...........1......1.............
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                `)
        } else {
            ojosDeFiore.setImage(img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ...........1f.....1f............
                ............1......1............
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                `)
        }
        for (let value of list2) {
            value.setPosition(value.x, value.y + 14)
        }
    }
    marcador.setPosition(80, posicionY)
    marcador.setVelocity(speed, 0)
    if (info.score() == 69) {
        for (let index = 0; index < 3; index++) {
            music.baDing.play()
        }
    }
}
function setColorMarcador () {
    if (marcadorUsado == 0) {
        marcador.setImage(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . 8 8 . . . . . . . 
            . . . . . . 8 6 6 8 . . . . . . 
            . . . . . . 8 6 6 8 . . . . . . 
            . . . . . . . 8 8 . . . . . . . 
            . . . . . . 8 6 6 8 . . . . . . 
            . . . . . f f 6 6 8 f . . . . . 
            . . . . f d d f f 8 d f . . . . 
            . . . f d d d d d f f . . . . . 
            . . . f d d d f f d f . . . . . 
            . . . f d d f d d f d f . . . . 
            . . . f d f d f f d f . . . . . 
            . . . f d f f d d f . . . . . . 
            . . . . f d f f f 8 . . . . . . 
            . . . . f d d f 6 8 . . . . . . 
            . . . . . f f d f 8 . . . . . . 
            `)
    } else if (marcadorUsado == 1) {
        marcador.setImage(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . 2 2 . . . . . . . 
            . . . . . . 2 3 3 2 . . . . . . 
            . . . . . . 2 3 3 2 . . . . . . 
            . . . . . . . 2 2 . . . . . . . 
            . . . . . . 2 3 3 2 . . . . . . 
            . . . . . f f 3 3 2 f . . . . . 
            . . . . f d d f f 2 d f . . . . 
            . . . f d d d d d f f . . . . . 
            . . . f d d d f f d f . . . . . 
            . . . f d d f d d f d f . . . . 
            . . . f d f d f f d f . . . . . 
            . . . f d f f d d f . . . . . . 
            . . . . f d f f f 2 . . . . . . 
            . . . . f d d f 3 2 . . . . . . 
            . . . . . f f d f 2 . . . . . . 
            `)
    } else if (marcadorUsado == 2) {
        marcador.setImage(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . 4 4 . . . . . . . 
            . . . . . . 4 5 5 4 . . . . . . 
            . . . . . . 4 5 5 4 . . . . . . 
            . . . . . . . 4 4 . . . . . . . 
            . . . . . . 4 5 5 4 . . . . . . 
            . . . . . f f 5 5 4 f . . . . . 
            . . . . f d d f f 4 d f . . . . 
            . . . f d d d d d f f . . . . . 
            . . . f d d d f f d f . . . . . 
            . . . f d d f d d f d f . . . . 
            . . . f d f d f f d f . . . . . 
            . . . f d f f d d f . . . . . . 
            . . . . f d f f f 4 . . . . . . 
            . . . . f d d f 5 4 . . . . . . 
            . . . . . f f d f 4 . . . . . . 
            `)
    }
}
let marcadorGraficoAnterior: Sprite = null
let marcadorPos = 0
let botonPresionado = 0
let speed = 0
let marcadorUsado = 0
let marcadorAnterior = 0
let list2: Sprite[] = []
let posicionY = 0
let marcador: Sprite = null
let ojosDeFiore: Sprite = null
let bocaDeFiore: Sprite = null
let paredIzq = 10
let paredDer = 150
let caraDeFiore = sprites.create(img`
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ............ffffff..............
    ...........feeeeeeeee...........
    ..........feeeddedeeee..........
    .........feeedededdedee.........
    ........feedddedededddee........
    .......feeddddddddddddde........
    .......feedeedddddeeddde........
    .......feedddddddddddddfe.......
    ......feeddddddddddddddfe.......
    .....fdedddddddddddddddfef......
    .....fdedddddddbdddddddfdf......
    ......ffdddddddbdddddddff.......
    .......fddddddddbddddddf........
    ........fddddbdbddbdddf.........
    ........fdddbddddddbddf.........
    .........fdddddddddddf..........
    .........fdddddddddddf..........
    ..........fdddddddddf...........
    ...........fdddddddf............
    ............fffffff.............
    `, SpriteKind.Projectile)
bocaDeFiore = sprites.create(img`
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ...............ff...............
    ................................
    ................................
    ................................
    `, SpriteKind.Projectile)
ojosDeFiore = sprites.create(img`
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ...........1......1.............
    ...........f1.....f1............
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    `, SpriteKind.Projectile)
paredDer = 150
paredIzq = 10
let base = sprites.create(img`
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . e e e e . . . . . . 
    e e e e e e e e e e e e e e e e 
    e e e e e e e e e e e e e e e e 
    `, SpriteKind.Projectile)
marcador = sprites.create(img`
    . . . . . . . . . . . . . . . . 
    . . . . . . . 8 8 . . . . . . . 
    . . . . . . 8 6 6 8 . . . . . . 
    . . . . . . 8 6 6 8 . . . . . . 
    . . . . . . . 8 8 . . . . . . . 
    . . . . . . 8 6 6 8 . . . . . . 
    . . . . . f f 6 6 8 f . . . . . 
    . . . . f d d f f 8 d f . . . . 
    . . . f d d d d d f f . . . . . 
    . . . f d d d f f d f . . . . . 
    . . . f d d f d d f d f . . . . 
    . . . f d f d f f d f . . . . . 
    . . . f d f f d d f . . . . . . 
    . . . . f d f f f 8 . . . . . . 
    . . . . f d d f 6 8 . . . . . . 
    . . . . . f f d f 8 . . . . . . 
    `, SpriteKind.Projectile)
posicionY = 108
list2 = []
list2[0] = base
marcador.setPosition(80, posicionY)
base.setPosition(80, 110)
marcador.setVelocity(50, 0)
marcadorAnterior = 80
marcadorUsado = 0
info.setLife(3)
info.setScore(0)
speed = 40
game.onUpdate(function () {
    marcadorPos = marcador.x
    if (marcadorPos < paredIzq) {
        marcador.setVelocity(speed, 0)
        paredIzq = randint(30, 70)
    } else if (marcadorPos > paredDer) {
        paredDer = randint(90, 130)
        marcador.setVelocity(speed * -1, 0)
    }
})
